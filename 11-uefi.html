<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
<title>11. UEFI | OpenCore 简体中文参考手册(非官方)</title>
<meta name="generator" content="Hexo 5.1.1">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="description" content="由 Sukka 和黑苹果爱好者们维护的 OpenCore 文档简体中文翻译，实时更新 OpenCore 上游文档改动。努力提供权威的 OpenCore 简体中文参考资料。">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/logo/favicon.ico">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/github.min.css">
<link rel="stylesheet" href="/theme-doku/css/doku.css">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
<link rel="canonical" href="https://oc.skk.moe/11-uefi.html">

</head>

<body>
    

<nav id="doku-navbar" class="navbar is-spaced has-shadow">
    <div class="container">
        <div class="navbar-brand">
            <!-- burger btn -->
            <a role="button" class="navbar-burger burger" id="doku-sidebar-toggle">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>

            <a class="navbar-item" href="https://oc.skk.moe">
                <h1 class="doku-navbar-title">
                    <img src="/logo/navbar.png" height="28">
                    <span class="is-size-4"></span>
                </h1>
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                
                    <a class="navbar-item" href="/">
                        
                        
                            <span>OpenCore 参考手册(简体中文)</span>
                        
                    </a>
                
                    <a class="navbar-item" href="/search.html">
                        
                            <span class="icon">
                                <i class="fas fa-search"></i>
                            </span>
                        
                        
                            <span>站内搜索</span>
                        
                    </a>
                
                    <a class="navbar-item" target="_blank" rel="noopener" href="https://github.com/SukkaW/OpenCore-Document-zh_Hans">
                        
                            <span class="icon">
                                <i class="fab fa-github"></i>
                            </span>
                        
                        
                            <span>GitHub</span>
                        
                    </a>
                
                <!-- navbar link -->
                <!--<a class="navbar-item">
                Home
            </a>-->
            </div>
            <!-- i18n switch -->
            <div class="navbar-end">
                <!--<div class="navbar-item">
                    <div class="dropdown is-right is-hoverable">
                        <div class="dropdown-trigger">
                            <button class="button" id="navbar-i18n-btn">
                                <span class="icon is-small">
                                    <i class="fas fa-globe-americas" aria-hidden="true"></i>
                                </span>
                                <span>Language</span>
                                <span class="icon is-small">
                                    <i class="fas fa-angle-down" aria-hidden="true"></i>
                                </span>
                            </button>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-content">
                                <a href="#" class="dropdown-item">
                                    Dropdown item
                                </a>
                                <a class="dropdown-item">
                                    Other dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Active dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Other dropdown item
                                </a>
                            </div>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
</nav>


    <div class="container-fluid">
        <section class="main-content">
            


<aside class="doku-sidebar" id="doku-sidebar">
    <div class="doku-sidebar-content">
        <div class="menu">
            
                <ul class="menu-list is-hidden-desktop">
                    
                        
                            <li><a href="/">OpenCore 参考手册(简体中文)</span></a></li>
                        
                    
                        
                            <li><a href="/search.html">站内搜索</span></a></li>
                        
                    
                        
                            <li><a target="_blank" rel="noopener" href="https://github.com/SukkaW/OpenCore-Document-zh_Hans">GitHub</span></a></li>
                        
                    
                </ul>
            
            <hr class="is-hidden-desktop">
            
                
                    <ul class="menu-list">
                        
                            <li><a  href="/">0. 首页</a></li>
                        
                            <li><a  href="/1-introduction.html">1. 简介</a></li>
                        
                            <li><a  href="/2-configuration.html">2. 配置</a></li>
                        
                            <li><a  href="/3-setup.html">3. Setup</a></li>
                        
                            <li><a  href="/4-acpi.html">4. ACPI</a></li>
                        
                            <li><a  href="/5-booter.html">5. Booter</a></li>
                        
                            <li><a  href="/6-device-properties.html">6. DeviceProperties</a></li>
                        
                            <li><a  href="/7-kernel.html">7. Kernel</a></li>
                        
                            <li><a  href="/8-misc.html">8. Misc</a></li>
                        
                            <li><a  href="/9-nvram.html">9. NVRAM</a></li>
                        
                            <li><a  href="/10-platform-info.html">10. PlatformInfo</a></li>
                        
                            <li><a class="is-current" href="/11-uefi.html">11. UEFI</a></li>
                        
                            <li><a  href="/12-troubleshooting.html">12. 排错</a></li>
                        
                            <li><a  href="/kextlist.html">附录 1. OpenCore 兼容 Kext 列表</a></li>
                        
                    </ul>
                
            
        </div>
    </div>
</aside>

            <main class="is-paddingless doku-main-wrapper" id="doku-main">
                

<article class="doku-document-container clearfix">
    <header class="hero is-light" id="doku-document-hero">
        <div class="hero-body">
            <h1 class="title">11. UEFI</h1>
            
                <p class="subtitle">UEFI 驱动以及加载顺序</p>
            
            
                
                    <p><small>由 xMuu、Sukka、derbalkon 整理，由 Sukka、derbalkon 翻译</small></p>
                
                
                    <p><small>本页面最后更新于 2021 年 02 月 01 日</small></p>
                
                <br>
            
            
                <a href="https://github.com/sukkaw/OpenCore-Document-zh_Hans/tree/master/source/11-uefi.md" target="_blank" rel="external nofollow noreferrer noopener" class="button is-small is-rounded is-black"><span class="icon is-small"><i class="fab fa-github"></i></span><span>在 GitHub 上编辑</span></a>
            
        </div>
    </header>
    <div class="columns">
        <div class="column is-9-tablet doku-document-wrapper">
            <div class="content">
                <h2 id="11-1-简介"><a href="#11-1-简介" class="headerlink" title="11.1 简介"></a>11.1 简介</h2><p><a target="_blank" rel="noopener" href="https://uefi.org/specifications">UEFI</a>（统一可扩展固件接口）是一种规范，用于定义操作系统和平台固件之间的软件接口。本部分允许加载其他 UEFI 模块 和/或 对板载固件进行调整。要检查固件内容，应用修改并执行升级，可以使用 <a target="_blank" rel="noopener" href="https://github.com/LongSoft/UEFITool/releases">UEFITool</a> 和其他实用程序。</p>
<h2 id="11-2-驱动列表"><a href="#11-2-驱动列表" class="headerlink" title="11.2 驱动列表"></a>11.2 驱动列表</h2><p>根据固件不同、可能需要不同的驱动程序。加载不兼容的驱动程序可能会导致无法启动系统，甚至导致固件永久性损坏。OpenCore 目前对以下 UEFI 驱动提供支持。OpenCore 可能兼容其他 UEFI 驱动，但不能确定。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>AudioDxe</code></a>* — UEFI 固件中的 HDA 音频驱动程序，适用于大多数 Intel 和其他一些模拟音频控制器。参考 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/bugtracker/issues/740">acidanthera/bugtracker#740</a> 来了解 AudioDxe 的已知问题。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>CrScreenshotDxe</code></a>* — 截图驱动。启用后，按下 <kbd>F10</kbd> 将能够截图并保存在 EFI 分区根目录下。该驱动基于 <a target="_blank" rel="noopener" href="https://github.com/NikolajSchlej">Nikolaj Schlej</a> 修改的 LongSoft 开发的 <a target="_blank" rel="noopener" href="https://github.com/LongSoft/CrScreenshotDxe"><code>CrScreenshotDxe</code></a>。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OcBinaryData"><code>ExFatDxe</code></a> — 用于 Bootcamp 支持的专有 ExFAT 文件系统驱动程序，通常可以在 Apple 固件中找到。 对于 <code>Sandy Bridge</code> 和更早的 CPU，由于缺少 <code>RDRAND</code> 指令支持，应使用 <code>ExFatDxeLegacy</code> 驱动程序。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OcBinaryData"><code>HfsPlus</code></a> — Apple 固件中常见的具有 Bless 支持的专有 HFS 文件系统驱动程序。对于 <code>Sandy Bridge</code> 和更早的 CPU，由于这些 CPU 缺少 <code>RDRAND</code> 指令支持，应使用 <code>HfsPlusLegacy</code> 驱动程序。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>HiiDatabase</code></a>* — 来自 <code>MdeModulePkg</code> 的 HII 服务驱动。Ivy Bridge 及其以后的大多数固件中都已内置此驱动程序。某些带有 GUI 的应用程序（例如 UEFI Shell）可能需要此驱动程序才能正常工作。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>EnhancedFatDxe</code></a> — 来自 <code>FatPkg</code> 的 FAT 文件系统驱动程序。这个驱动程序已经被嵌入到所有 UEFI 固件中，无法为 OpenCore 使用。众所周知，许多固件的 FAT 支持实现都有错误，导致在尝试写操作时损坏文件系统。如果在引导过程中需要写入 EFI 分区，则可能需要将此驱动程序嵌入固件中。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>NvmExpressDxe</code></a>* — 来自<code>MdeModulePkg</code> 的 NVMe 驱动程序。从 Broadwell 开始的大多数固件都包含此驱动程序。对于 Haswell 以及更早的固件，如果安装了 NVMe SSD 驱动器，则将其嵌入固件中可能会更理想。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>OpenCanopy</code></a>* — OpenCore 插件之一，用于实现图形引导界面。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>OpenRuntime</code></a>* — OpenCore 插件之一，原名 <code>FwRuntimeServices.efi</code>，用于实现 <code>OC_FIRMWARE_RUNTIME</code> 协议，通过支持只读、只写 NVRAM 变量，提升了 OpenCore 和 Lilu 的安全性。有些 Quirk 如 <code>RequestBootVarRouting</code> 依赖此驱动程序。由于 Runtime 驱动的性质（与目标操作系统并行运行），因此它不能在 OpenCore 本身实现，而是与 OpenCore 捆绑在一起。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>OpenUsbKbDxe</code></a>* — USB 键盘驱动，在自定义 USB 键盘驱动程序的基础上新增了对 <code>AppleKeyMapAggregator</code> 协议的支持。这是内置的 <code>KeySupport</code> 的等效替代方案。根据固件不同，效果可能会更好或者更糟。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OcBinaryData"><code>PartitionDxe</code></a> — 一个专门的分区管理驱动程序，用于加载旧版 macOS 的 DMG 映像（如 macOS 10.9 的分区映像）。对于 <code>Sandy Bridge</code> 或者更早的 CPU，由于缺少 <code>RDRAND</code> 指令支持，应使用 <code>PartitionDxeLegacy</code> 驱动程序。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>Ps2KeyboardDxe</code></a>* — 从 <code>MdeModulePkg</code> 提取出来的 PS/2 键盘驱动。OpenDuetPkg 和一些固件可能不包括这个驱动，但对于 PS/2 键盘来说该驱动是必须的。注意，和 <code>OpenUsbKbDxe</code> 不同，该驱动不提供对 <code>AppleKeyMapAggregator</code> 的支持、因此需要启用 <code>KeySupport</code> 这个 Quirk。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>Ps2MouseDxe</code></a>* — 从 <code>MdeModulePkg</code> 提取出来的 PS/2 鼠标驱动。一些非常老旧的笔记本的固件中可能不包含该驱动，但是这些笔记本需要依赖该驱动才能在引导界面使用触控板。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>UsbMouseDxe</code></a>* — 从 <code>MdeModulePkg</code> 提取出来的 USB 鼠标驱动。一般只有虚拟机（如 OVMF）的固件中可能不包含该驱动，这些虚拟机需要依赖该驱动才能在引导界面使用鼠标。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>VBoxHfs</code></a> — 带有 Bless 支持的 HFS 文件系统驱动。是 Apple 固件中 <code>HfsPlus</code> 驱动的开源替代。虽然功能完善，但是启动速度比 <code>HFSPlus</code> 慢三倍，并且尚未经过安全审核。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/audk"><code>XhciDxe</code></a>* — 来自 <code>MdeModulePkg</code> 的 XHCI USB controller 驱动程序。从 Sandy Bridge 开始的大多数固件中都包含此驱动程序。在较早的固件或旧系统可以用于支持外部 USB 3.0 PCI 卡。</li>
</ul>
<p>标有 <code>*</code> 的驱动程序是 OpenCore 附带的。如果要从 UDK（EDK II）编译驱动程序，请使用编译 OpenCore 的相同命令，但要注意选择相应的软件包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/acidanthera/audk UDK<br><span class="hljs-built_in">cd</span> UDK<br><span class="hljs-built_in">source</span> edksetup.sh<br>make -C BaseTools<br>build -a X64 -b RELEASE -t XCODE5 -p FatPkg/FatPkg.dsc<br>build -a X64 -b RELEASE -t XCODE5 -p MdeModulePkg/MdeModulePkg.dsc<br></code></pre></td></tr></table></figure>

<h2 id="11-3-工具与应用程序"><a href="#11-3-工具与应用程序" class="headerlink" title="11.3 工具与应用程序"></a>11.3 工具与应用程序</h2><p>一些不依赖 OpenCore 的工具可以帮助调试固件和硬件。下面列出了一些已知的工具。虽然有些工具可以从 OpenCore 启动，但大部分工具都应该直接或从 <code>OpenCoreShell</code> 中单独运行。</p>
<p>要启动到 <code>OpenShell</code> 或任何其他工具，直接将 <code>OpenShell.efi</code> 保存在 FAT32 分区中的 <code>EFI/BOOT/BOOTX64.EFI</code> 下。此时分区方案是 <code>GPT</code> 还是 <code>MBR</code> 并不重要。</p>
<p>这种方法在 Mac 和其他计算机上都可以使用。还有一种只能在 Mac 上的 HFS+ 或 APFS 分区上使用的方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo bless --verbose --file /Volumes/VOLNAME/DIR/OpenShell.efi --folder /Volumes/VOLNAME/DIR/ --setBoot<br></code></pre></td></tr></table></figure>

<center><em><strong>Listing 3</strong>: Bless 工具</em></center><br>

<p><em>注 1</em>：你可能需要将 <code>/System/Library/CoreServices/BridgeVersion.bin</code> 拷贝到 <code>/Volumes/VOLNAME/DIR</code>。</p>
<p><em>注 2</em>：为了能够使用 <code>bless</code>，你可能需要 <a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/ConfiguringSystemIntegrityProtection/ConfiguringSystemIntegrityProtection.html">禁用系统完整性保护</a>。</p>
<p><em>注 3</em>：为了能够正常启动，你可能需要 <a target="_blank" rel="noopener" href="https://support.apple.com/HT208330">禁用 Apple 安全启动</a>（如果有的话）。</p>
<p>一些已知的 UEFI 工具（内置工具已用 <code>*</code> 标出）：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>BootKicker</code></a>* — 进入 Apple 的 BootPicker 菜单（仅 Mac 同款显卡才可以使用）。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>ChipTune</code></a>* — 测试 BeepGen 协议，生成不同频率和长度的音频信号。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>CleanNvram</code></a>* — 重置 NVRAM，以一个单独的工具呈现。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>FwProtect</code></a>* — 解锁和回锁 NVRAM 保护，让其他工具在从 OpenCore 启动时能够获得完整的 NVRAM 访问权限。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>GopStop</code></a>* — 用一个 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/tree/master/Application/GopStop">简单的场景</a> 测试 GraphicOutput 协议。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>KeyTester</code></a>* — 在 <code>SimpleText</code> 模式下测试键盘输入。</li>
<li><a target="_blank" rel="noopener" href="https://www.memtest86.com"><code>MemTest86</code></a> — 内存测试工具。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>OpenCore Shell</code></a>* — 由 OpenCore 配置的 <a target="_blank" rel="noopener" href="http://github.com/tianocore/edk2"><code>UEFI Shell</code></a>，与绝大部分固件兼容。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>PavpProvision</code></a> — 执行 EPID 配置（需要配置证书数据）。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>ResetSystem</code></a>* — 用于执行系统重置的实用程序。以重置类型作为参数：<code>ColdReset</code>, <code>Firmware</code>, <code>WarmReset</code>, <code>Shutdown</code>。默认为 <code>ColdReset</code>。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>RtcRw</code></a>* — 读取和写入 RTC (CMOS) 存储器的使用程序。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg"><code>VerifyMsrE2</code></a>* — 检查 <code>CFG Lock</code>（MSR <code>0xE2</code> 写保护）在所有 CPU 核心之间的一致性。</li>
</ul>
<h2 id="11-4-OpenCanopy"><a href="#11-4-OpenCanopy" class="headerlink" title="11.4 OpenCanopy"></a>11.4 OpenCanopy</h2><p>OpenCanopy 是一个 OpenCore 的图形化界面接口，基于 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg">OpenCorePkg</a> <code>OcBootManagementLib</code> 实现，提供与现有的文字模式类似的功能。当 <code>PickerMode</code> 设置为 <code>External</code> 时启用。</p>
<p>OpenCanopy 所需的图象资源位于 <code>Resources</code> 目录下，一些简单的资源（字体和图标）可以在 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OcBinaryData">OcBinaryData 仓库</a> 中获取。可以在网络上找到自定义图标（比如 <a target="_blank" rel="noopener" href="https://github.com/blackosx/OpenCanopyIcons">这里</a> 和 <a target="_blank" rel="noopener" href="https://applelife.ru/threads/kastomizacija-opencanopy.2945020/">这里</a>）。</p>
<p>OpenCanopy 为 <code>PickerAttributes</code> 提供了全面的支持，并提供了一套可配置的内置图标集。默认选择的图标由 <code>DefaultBackgroundColor</code> 变量决定，当该变量的值定义为浅灰时，则使用 <code>Old</code> 前缀的图标，定义为其他颜色时则使用没有前缀名的图标。</p>
<p>预定义的图标放在 <code>\EFI\OC\Resources\Image</code> 目录下。下面提供了所支持的图标的完整列表（<code>.icns</code> 格式）。可选图标如未提供，将使用最接近的可用的图标。外置设备的条目将使用 <code>Ext</code> 前缀的图标（如 <code>OldExtHardDrive.icns</code>）。</p>
<p><em>注</em>：以下标注的所有尺寸均为 1x 缩放级别的标准尺寸，其他缩放级别的尺寸须作相应调整。</p>
<ul>
<li><code>Cursor</code> — 鼠标光标（必需，最大尺寸 144x144）。</li>
<li><code>Selected</code> — 选定的项目（必需，144x144）。</li>
<li><code>Selector</code> — 选择项目（必需，最大尺寸 144x40）。</li>
<li><code>Left</code> — 向左滚动（必需，最大尺寸 40x40）。</li>
<li><code>Right</code> — 向右滚动（必需，最大尺寸 40x40）。</li>
<li><code>HardDrive</code> — 通用的 OS（必需，128x128）。</li>
<li><code>Background</code> — 居中的背景图片。</li>
<li><code>Apple</code> — Apple OS (128x128)。</li>
<li><code>AppleRecv</code> — Apple Recovery OS (128x128)。</li>
<li><code>AppleTM</code> — Apple Time Machine (128x128)。</li>
<li><code>Windows</code> — Windows (128x128)。</li>
<li><code>Other</code> — 自定义条目（见 <code>Entries</code>，128x128）。</li>
<li><code>ResetNVRAM</code> — 重置 NVRAM 工具或系统动作（128x128）。</li>
<li><code>Shell</code> — 具有 UEFI Shell 名称的条目（如 <code>OpenShell</code>，128x128）。</li>
<li><code>Tool</code> — 其他工具（128x128）。</li>
</ul>
<p>预定义的标签放在 <code>\EFI\OC\Resources\Label</code> 目录下。每个标签都有 <code>.lbl</code> 或 <code>.l2x</code> 的后缀，以代表缩放级别。完整的标签列表如下所示。所有标签都是必需的。</p>
<ul>
<li><code>EFIBoot</code> — 通用的 OS。</li>
<li><code>Apple</code> — Apple OS。</li>
<li><code>AppleRecv</code> — Apple Recovery OS。</li>
<li><code>AppleTM</code> — Apple Time Machine。</li>
<li><code>Windows</code> — Windows。</li>
<li><code>Other</code> — 自定义条目（见 <code>Entries</code>）。</li>
<li><code>ResetNVRAM</code> — 重置 NVRAM 工具或系统动作。</li>
<li><code>Shell</code> — 具有 UEFI Shell 名称的条目（如 <code>OpenShell</code>）。</li>
<li><code>Tool</code> — 其他工具。</li>
</ul>
<p><em>注</em>：所有标签的高度必须为 12px，宽度不限。</p>
<p>可以通过附带的实用程序来生成标签和图标：<code>disklabel</code> 和 <code>icnspack</code>。字体为 12pt 的 Helvetica，比例缩放。</p>
<p>字体格式对应于 <a target="_blank" rel="noopener" href="https://www.angelcode.com/products/bmfont">AngelCode binary BMF</a>。虽然有很多工具可以生成字体文件，但目前还是建议使用 <a target="_blank" rel="noopener" href="https://github.com/danpla/dpfontbaker">dpFontBaker</a> 来生成位图字体（<a target="_blank" rel="noopener" href="https://github.com/danpla/dpfontbaker/pull/1">用 CoreText 达到最佳效果</a>），并使用 <a target="_blank" rel="noopener" href="https://github.com/usr-sse2/fonverter">fonverter</a> 将其导出为二进制格式。</p>
<h2 id="11-5-OpenRuntime"><a href="#11-5-OpenRuntime" class="headerlink" title="11.5 OpenRuntime"></a>11.5 OpenRuntime</h2><p><code>OpenRuntime</code> 是一个 OpenCore 的插件，提供了对 <code>OC_FIRMWARE_RUNTIME</code> 协议的实现。该协议对 OpenCore 的部分功能提供了支持，而这部分功能由于需要 Runtime（如操作系统）中运行、因此无法内置在 OpenCore 中。该协议提供了包括但不限于如下功能：</p>
<ul>
<li>NVRAM 命名空间，允许隔离操作系统对所选变量的访问（如 <code>RequestBootVarRouting</code> 或 <code>ProtectSecureBoot</code>）。</li>
<li>只读和只写的 NVRAM 变量，增强了 OpenCore、Lilu 以及 Lilu 插件的安全性，比如 VirtualSMC，实现了 <code>AuthRestart</code> 支持。</li>
<li>NVRAM 隔离，能够保护所有变量避免被不信任的操作系统写入（如 <code>DisableVariableWrite</code>）。</li>
<li>UEFI Runtime Services 内存保护管理，以避开只读映射的问题（如 <code>EnableWriteUnprotector</code>）。</li>
</ul>
<h2 id="11-6-属性列表"><a href="#11-6-属性列表" class="headerlink" title="11.6 属性列表"></a>11.6 属性列表</h2><h3 id="1-APFS"><a href="#1-APFS" class="headerlink" title="1. APFS"></a>1. <code>APFS</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 配置 APFS 分区驱动，具体配置内容参见下文 APFS 属性部分。</p>
<h3 id="2-Audio"><a href="#2-Audio" class="headerlink" title="2. Audio"></a>2. <code>Audio</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 配置音频后端支持，具体配置如下文所述。</p>
<p>音频支持为上游协议提供了一种与所选硬件和音频资源交互的方式。所有音频资源应该保存在 <code>\EFI\OC\Resources\Audio</code> 目录。目前支持的音频文件格式为 MP3 和 WAVE PCM。虽然支持哪种音频流格式取决于驱动程序，但大多数常见的音频卡都支持 44100 或 48000Hz 的 16 位立体声。</p>
<p>音频文件的路径是由音频的类型、本地化语言和路径决定的。每个文件名看起来都类似于：<code>[audio type]_[audio localisation]_[audio path].[audio ext]</code>。对于没有本地化的文件，其文件名不包含语言代码，看起来类似于：<code>[audio type]_[audio path].[audio ext]</code>。其中音频扩展名为 <code>mp3</code> 或 <code>wav</code>。</p>
<ul>
<li>OpenCore 音频文件的音频类型可以是 <code>OCEFIAudio</code>，macOS 引导程序的音频文件的音频类型可以是 <code>AXEFIAudio</code>。</li>
<li>音频本地化语言由两个字母的语言代码表示（如 <code>en</code>），中文、西班牙语和葡萄牙语除外。具体请看 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Apple/Protocol/AppleVoiceOver.h"><code>APPLE_VOICE_OVER_LANGUAGE_CODE</code> 的定义</a> 来了解所有支持的本地化列表。</li>
<li>音频路径是对应于文件标识符的基本文件名。macOS 引导程序的音频路径参考 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Apple/Protocol/AppleVoiceOver.h"><code>APPLE_VOICE_OVER_AUDIO_FILE</code> 的定义</a>。OpenCore 的音频路径参考 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Protocol/OcAudio.h"><code>OC_VOICE_OVER_AUDIO_FILE</code> 的定义</a>。唯一例外的是 OpenCore 启动提示音文件：<code>OCEFIAudio_VoiceOver_Boot.mp3</code>。</li>
</ul>
<p>macOS 引导程序和 OpenCore 的音频本地化是分开的。macOS 引导程序是在 <code>systemLanguage.utf8</code> 文件中的 <code>preferences.efires</code> 归档中设置，并由操作系统控制。OpenCore 则是使用 <code>prev-lang:kbd</code> 变量的值来控制。当某一特定文件的音频本地化缺失时，将会使用英语（<code>en</code>）来代替。示例音频文件可以在 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OcBinaryData">OcBinaryData 仓库</a> 中找到。</p>
<h3 id="3-ConnectDrivers"><a href="#3-ConnectDrivers" class="headerlink" title="3. ConnectDrivers"></a>3. <code>ConnectDrivers</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 驱动程序加载后执行 UEFI 控制器连接操作。</p>
<p>此选项对于加载某些遵循 UEFI 驱动模型的 驱动程序（如文件系统驱动、音频输出驱动）很有用，因为这些驱动可能无法自行启动。此选项对会自动连接的驱动程序来说是不必要的，并且可能会稍微减慢启动速度。</p>
<p><em>注</em>：某些固件（特别是 Apple 的）仅连接包含操作系统的驱动器以加快启动过程。启用此选项可以在拥有多个驱动器时查看所有引导选项。</p>
<h3 id="4-Drivers"><a href="#4-Drivers" class="headerlink" title="4. Drivers"></a>4. <code>Drivers</code></h3><p><strong>Type</strong>: <code>plist array</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 从 <code>OC/Drivers</code> 目录下加载选择的驱动。设计为填充 UEFI 驱动程序加载的文件名。</p>
<h3 id="5-Input"><a href="#5-Input" class="headerlink" title="5. Input"></a>5. <code>Input</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 从下面的 Input 属性部分，应用为输入（键盘和鼠标）而设计的个性化设置。</p>
<h3 id="6-Output"><a href="#6-Output" class="headerlink" title="6. Output"></a>6. <code>Output</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 从下面的 Output 属性部分，应用为输出（文本和图形）而设计的个性化设置。</p>
<h3 id="7-ProtocolOverrides"><a href="#7-ProtocolOverrides" class="headerlink" title="7. ProtocolOverrides"></a>7. <code>ProtocolOverrides</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 强制执行从下面的 ProtocolOverrides 属性部分所选协议的内置版本。</p>
<p><em>注</em>：所有协议实例的安装都优先于驱动程序的加载。</p>
<h3 id="8-Quirks"><a href="#8-Quirks" class="headerlink" title="8. Quirks"></a>8. <code>Quirks</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Failsafe</strong>: None<br><strong>Description</strong>: 从下面的 Quirks 属性部分，应用个性化的固件 Quirks。</p>
<h3 id="9-ReservedMemory"><a href="#9-ReservedMemory" class="headerlink" title="9. ReservedMemory"></a>9. <code>ReservedMemory</code></h3><p><strong>Type</strong>: <code>plist array</code><br><strong>Description</strong>: 设计为用 <code>plist dict</code> 值填充，用于描述对特定固件和硬件功能要求很高的内存区域，这些区域不应该被操作系统使用。比如被 Intel HD 3000 破坏的第二个 256MB 区域，或是一个有错误的 RAM 的区域。</p>
<h2 id="11-7-APFS-属性"><a href="#11-7-APFS-属性" class="headerlink" title="11.7 APFS 属性"></a>11.7 APFS 属性</h2><h3 id="1-EnableJumpstart"><a href="#1-EnableJumpstart" class="headerlink" title="1. EnableJumpstart"></a>1. <code>EnableJumpstart</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>False</code><br><strong>Description</strong>: 从一个 APFS 容器中加载 APFS 驱动。</p>
<p>APFS 的 EFI 驱动内置在所有可以作为系统启动盘的 APFS 容器之中。这一选项将会根据基于 <code>ScanPolicy</code> 找到的 APFS 容器，从中加载 APFS 驱动。更多详情请查看 <a target="_blank" rel="noopener" href="https://developer.apple.com/support/apple-file-system/Apple-File-System-Reference.pdf">苹果 APFS 文件系统参考手册</a> 中的 <code>EFI Jummpstart</code> 章节。</p>
<h3 id="2-GlobalConnect"><a href="#2-GlobalConnect" class="headerlink" title="2. GlobalConnect"></a>2. <code>GlobalConnect</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 在 APFS 加载期间执行完整的设备连接。</p>
<p>代替通常情况下用于 APFS 驱动程序加载的分区句柄连接，每一个句柄都是递归连接的。这可能会比平时花费更多的时间，但是是某些固件访问 APFS 分区的唯一方法，比如在旧的惠普笔记本电脑上发现的那样。</p>
<h3 id="3-HideVerbose"><a href="#3-HideVerbose" class="headerlink" title="3. HideVerbose"></a>3. <code>HideVerbose</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>False</code><br><strong>Description</strong>: 是否隐藏 APFS 驱动的 verbose 信息。</p>
<p>APFS 驱动的 verbose 信息有助于 debug。</p>
<h3 id="4-JumpstartHotPlug"><a href="#4-JumpstartHotPlug" class="headerlink" title="4. JumpstartHotPlug"></a>4. <code>JumpstartHotPlug</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>False</code><br><strong>Description</strong>: 允许从进入 OpenCore 引导菜单后插入的可移除硬盘上的 APFS 容器中加载 APFS 驱动。</p>
<p>这一选项不仅提供了进入 OpenCore 以后再插入 U 盘的支持，而且还允许了在 OpenCore 引导菜单下 APFS U 盘的热插拔。</p>
<h3 id="5-MinDate"><a href="#5-MinDate" class="headerlink" title="5. MinDate"></a>5. <code>MinDate</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 允许加载的最老 APFS 驱动的发布日期。</p>
<p>APFS 驱动的版本号基于其发布日期。较旧版本的 APFS 驱动可能与较新的系统不兼容、或者有未修补的漏洞。通过这一选项可以避免 OpenCore 加载过旧版本的 APFS 驱动。</p>
<ul>
<li><code>0</code> — 使用默认数值。随着未来的更新，OpenCore 内置的默认数值也会不断更新。如果你会一直更新你的系统，我们推荐使用这一数值。目前默认数值为 <code>2018/06/21</code>。</li>
<li><code>-1</code> — 允许使用任何版本的 APFS 驱动（强烈不推荐）。</li>
<li>其他数值 — 数值格式应为形如 <code>20200401</code> 的格式。你可以从 OpenCore 的启动日志和 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Library/OcApfsLib.h">OcApfsLib</a> 中找到 APFS 驱动的版本号。</li>
</ul>
<h3 id="6-MinVersion"><a href="#6-MinVersion" class="headerlink" title="6. MinVersion"></a>6. <code>MinVersion</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 允许加载的最老 APFS 驱动的版本号。</p>
<p>APFS 驱动的版本号和 macOS 版本相关。较旧版本的 APFS 驱动可能与较新的系统不兼容、或者有未修补的漏洞。通过这一选项可以避免 OpenCore 加载过旧版本的 APFS 驱动。</p>
<ul>
<li><code>0</code> — 使用默认数值。随着未来的更新，OpenCore 内置的默认数值也会不断更新。如果你会一直更新你的系统，我们推荐使用这一数值。目前默认数值选自 App Store 中能够下载到的 High Sierra（<code>748077008000000</code>）。</li>
<li><code>-1</code> — 允许使用任何版本的 APFS 驱动（强烈不推荐）。</li>
<li>其他数值 — 数值格式应为形如 <code>1412101001000000</code> 的格式（这是 macOS Catalina 10.15.4 的 APFS 驱动版本号），你可以从 OpenCore 的启动日志和 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Library/OcApfsLib.h">OcApfsLib</a> 中找到 APFS 驱动的版本号。</li>
</ul>
<h2 id="11-8-Audio-属性"><a href="#11-8-Audio-属性" class="headerlink" title="11.8 Audio 属性"></a>11.8 Audio 属性</h2><h3 id="1-AudioCodec"><a href="#1-AudioCodec" class="headerlink" title="1. AudioCodec"></a>1. <code>AudioCodec</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 特定音频控制器上的编解码器地址，用于音频支持。</p>
<p>一般来说，这里包含了内置模拟音频控制器（<code>HDEF</code>）上的第一个音频编解码器地址。音频编解码器地址（比如 <code>2</code>）可以在调试日志中找到（已用粗斜体标出）：</p>
<p><code>OCAU: 1/3 PciRoot(0x0)/Pci(0x1,0x0)/Pci(0x0,0x1)/VenMsg(&lt;redacted&gt;,<strong><em>00000000</em></strong>) (4 outputs)</code><br><code>OCAU: 2/3 PciRoot(0x0)/Pci(0x3,0x0)/VenMsg(&lt;redacted&gt;,<strong><em>00000000</em></strong>) (1 outputs)</code><br><code>OCAU: 3/3 PciRoot(0x0)/Pci(0x1B,0x0)/VenMsg(&lt;redacted&gt;,<strong><em>02000000</em></strong>) (7 outputs)</code></p>
<p>除此之外，该值还可以在 I/O 注册表的 <code>IOHDACodecDevice</code> class 中获得，包含在 <code>IOHDACodecAddress</code> 字段中。</p>
<h3 id="2-AudioDevice"><a href="#2-AudioDevice" class="headerlink" title="2. AudioDevice"></a>2. <code>AudioDevice</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: empty string<br><strong>Description</strong>: 特定音频控制器的设备路径，用于音频支持。</p>
<p>一般来说，这里包含了内置模拟音频控制器（<code>HDEF</code>）的设备路径，比如 <code>PciRoot(0x0)/Pci(0x1b,0x0)</code>。认可的音频控制器列表可以在调试日志中找到（已用粗斜体标出）：</p>
<p><code>OCAU: 1/3 <strong><em>PciRoot(0x0)/Pci(0x1,0x0)/Pci(0x0,0x1)</em></strong>/VenMsg(&lt;redacted&gt;,00000000) (4 outputs)</code><br><code>OCAU: 2/3 <strong><em>PciRoot(0x0)/Pci(0x3,0x0)</em></strong>/VenMsg(&lt;redacted&gt;,00000000) (1 outputs)</code><br><code>OCAU: 3/3 <strong><em>PciRoot(0x0)/Pci(0x1B,0x0)</em></strong>/VenMsg(&lt;redacted&gt;,02000000) (7 outputs)</code></p>
<p>除此之外，该值还可以在 macOS 中通过 <code>gfxutil -f HDEF</code> 命令来获取。如果指定了空的设备路径，则会使用第一个可用的音频控制器。</p>
<h3 id="3-AudioOut"><a href="#3-AudioOut" class="headerlink" title="3. AudioOut"></a>3. <code>AudioOut</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 特定编解码器的输出端口的索引，从 <code>0</code> 开始。</p>
<p>一般来说，这里包含了内置模拟音频控制器（<code>HDEF</code>）的绿色输出的索引。调试日志中输出节点的数量如下（已用粗斜体标出）：</p>
<p><code>OCAU: 1/3 PciRoot(0x0)/Pci(0x1,0x0)/Pci(0x0,0x1)/VenMsg(&lt;redacted&gt;,00000000) (<strong><em>4 outputs</em></strong>)</code><br><code>OCAU: 2/3 PciRoot(0x0)/Pci(0x3,0x0)/VenMsg(&lt;redacted&gt;,00000000) (<strong><em>1 outputs</em></strong>)</code><br><code>OCAU: 3/3 PciRoot(0x0)/Pci(0x1B,0x0)/VenMsg(&lt;redacted&gt;,02000000) (<strong><em>7 outputs</em></strong>)</code></p>
<p>找到正确端口的最快办法就是暴力地尝试 <code>0</code> 到 <code>N - 1</code> 的值。</p>
<h3 id="4-AudioSupport"><a href="#4-AudioSupport" class="headerlink" title="4. AudioSupport"></a>4. <code>AudioSupport</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 通过连接到固件音频驱动程序以激活音频支持。</p>
<p>启用此设置可将音频播放从内置协议路由到音频控制器（<code>AudioDevice</code>）上指定编解码器（<code>AudioCodec</code>）的专用音频端口（<code>AudioOut</code>）。</p>
<h3 id="5-MinimumVolume"><a href="#5-MinimumVolume" class="headerlink" title="5. MinimumVolume"></a>5. <code>MinimumVolume</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 听到的最小音量水平，从 <code>0</code> 到 <code>100</code>。</p>
<p>当计算出的音量小于 <code>MinimumVolume</code> 时，屏幕阅读器将使用这个音量。当计算出的音量小于 <code>MinimumVolume</code>，则不播放 Mac 特有的开机启动声音。</p>
<h3 id="6-PlayChime"><a href="#6-PlayChime" class="headerlink" title="6. PlayChime"></a>6. <code>PlayChime</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>Auto</code><br><strong>Description</strong>: 开机时播放 Mac 特有的风铃的声音。</p>
<p>启用此设置可通过内置的音频支持来播放开机时播放的声音。音量大小由 <code>MinimumVolume</code> 和 <code>VolumeAmplifier</code> 的设置，以及 <code>SystemAudioVolume</code> NVRAM 变量来决定。可用的值有：</p>
<ul>
<li><code>Auto</code> — 当 <code>StartupMute</code> NVRAM 变量不存在或设置为 <code>00</code> 时，启用开机声音。</li>
<li><code>Enabled</code> — 无条件启用开机声音。</li>
<li><code>Disabled</code> — 无条件禁用开机声音。</li>
</ul>
<p><em>注</em>：<code>Enable</code> 是可以与 <code>StartupMute</code> NVRAM 变量分开使用的，以此来避免在固件能够播放启动铃声时发生冲突。</p>
<h3 id="7-SetupDelay"><a href="#7-SetupDelay" class="headerlink" title="7. SetupDelay"></a>7. <code>SetupDelay</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 音频编解码器重新配置的延迟，单位为微秒。</p>
<p>某些编解码器在重新配置后需要特定延迟（由供应商提供，例如音量设置），此选项可对其进行配置。一般来说，必要的延迟时间可能长达 0.5 秒。</p>
<h3 id="8-VolumeAmplifier"><a href="#8-VolumeAmplifier" class="headerlink" title="8. VolumeAmplifier"></a>8. <code>VolumeAmplifier</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 系统音量到原始音量的线性换算的乘法系数，从 <code>0</code> 到 <code>1000</code>。</p>
<p>从 <code>SystemAudioVolume</code> 读取的音量范围会因编解码器的不同而不同。为了将 <code>[0, 127]</code> 范围内的值转换为原始音量范围 <code>[0, 100]</code> 内的值，所读取的值按比例调整为 <code>VolumeAmplifier</code> 的百分数：</p>
<p><img src="/img/11-1.svg" alt="11-1.svg"></p>
<p><em>注</em>：macOS 中使用的转换并不是线性的，但非常接近，因此我们忽略了这种细微差别。</p>
<h2 id="11-9-Input-属性"><a href="#11-9-Input-属性" class="headerlink" title="11.9 Input 属性"></a>11.9 Input 属性</h2><h3 id="1-KeyFiltering"><a href="#1-KeyFiltering" class="headerlink" title="1. KeyFiltering"></a>1. <code>KeyFiltering</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用键盘输入的合理性检查。</p>
<p>显然，有些主板，如 GA Z77P-D3，可能会在 <code>EFI_INPUT_KEY</code> 中返回所有输入协议的未初始化数据。这个选项会舍弃那些既不是 ASCII 码，也不是 UEFI 规范中定义的键（见版本 2.8 的表 107 和 108）。</p>
<h3 id="2-KeyForgetThreshold"><a href="#2-KeyForgetThreshold" class="headerlink" title="2. KeyForgetThreshold"></a>2. <code>KeyForgetThreshold</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 两次按键之间的间隔时间，单位为毫秒。</p>
<p><code>AppleKeyMapAggregator</code> 协议应该包含当前按下的键的固定长度的缓冲。但是大部分驱动程序仅将按键按下报告为中断、并且按住按键会导致在一定的时间间隔后再提交按下行为。一旦超时到期，我们就是用超时从缓冲区中删除一次按下的键，并且没有新提交。</p>
<p>此选项允许根据你的平台设置此超时。在大多数平台上有效的推荐值为 <code>5</code> 毫秒。作为参考，在 VMWare 上按住一个键大约每 2 毫秒就会重复一次，而在 APTIO V 上是 3 - 4 毫秒。因此，可以在较快的平台上设置稍低的值、在较慢的平台设置稍高的值，以提高响应速度。</p>
<p><em>注</em>：某些平台可能需要更高或者更低的值。例如，当 OpenCanopy 检测到按键丢失的时候，尝试稍高的值（比如增加到 <code>10</code>），当检测到按键停滞时，尝试稍低的值。由于每个平台各不相同，因此检查从 <code>1</code> 到 <code>25</code> 的每个值可能会比较合理。</p>
<h3 id="3-KeyMergeThreshold"><a href="#3-KeyMergeThreshold" class="headerlink" title="3. KeyMergeThreshold"></a>3. <code>KeyMergeThreshold</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 按住按键被重置的间隔时间，单位为毫秒。</p>
<p>与 <code>KeyForgetThreshold</code> 类似，这一选项适用于按键提交的顺序。为了能够识别同时按下的按键，我们需要设置一个超时时间，在这个时间内可以假定这两个按键是同时按下的。</p>
<p>对于 VMWare，同时按下多个键的间隔是 2 毫秒。对于 APTIO V 平台为 1 毫秒。一个接一个地按下按键会导致 6 毫秒和 10 毫秒的延迟。此选项的建议值为 2 毫秒，但对于较快的平台可以选取较小的值，反之亦然。</p>
<h3 id="4-KeySupport"><a href="#4-KeySupport" class="headerlink" title="4. KeySupport"></a>4. <code>KeySupport</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用这一选项后将会开启内置键盘支持。</p>
<p>这一选项基于 <code>AppleGenericInput</code>（<code>AptioInputFix</code>），激活内部键盘拦截器驱动程序以填充 <code>AppleKeyMapAggregator</code> 数据库以实现输入功能。如果使用了单独的驱动程序（如 <code>AppleUsbKbDxe</code>），则永远不要开启这一选项。</p>
<h3 id="5-KeySupportMode"><a href="#5-KeySupportMode" class="headerlink" title="5. KeySupportMode"></a>5. <code>KeySupportMode</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>Auto</code><br><strong>Description</strong>: 将内部键盘的输入转换设置为 <code>AppleKeyMapAggregator</code> 协议模式。</p>
<ul>
<li><code>Auto</code> — 从下述选项中自动选择</li>
<li><code>V1</code> — UEFI 传统输入协议 <code>EFI_SIMPLE_TEXT_INPUT_PROTOCOL</code>.</li>
<li><code>V2</code> — UEFI 现代标准输入协议 <code>EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL</code>.</li>
<li><code>AMI</code> — APTIO 输入协议 <code>AMI_EFIKEYCODE_PROTOCOL</code>.</li>
</ul>
<p><em>注</em>：目前 <code>V1</code>、<code>V2</code> 和 <code>AMI</code> 区别于 <code>Auto</code>，只对特定的协议进行过滤。这种情况在未来的版本中可能会改变。</p>
<h3 id="6-KeySwap"><a href="#6-KeySwap" class="headerlink" title="6. KeySwap"></a>6. <code>KeySwap</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用后将交换 <code>Command</code> 和 <code>Option</code>。</p>
<p>此选项对于 <code>Option</code> 键位于 <code>Command</code> 右侧的键盘来说会很有用。</p>
<h3 id="7-PointerSupport"><a href="#7-PointerSupport" class="headerlink" title="7. PointerSupport"></a>7. <code>PointerSupport</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用后将试图修复 UEFI 选择器协议。</p>
<p>该选项通过选择 OEM 协议实现标准 UEFI 指针协议 <code>EFI_SIMPLE_POINTER_PROTOCOL</code>。该选项在 Z87 华硕主板可能有用（该主板的 <code>EFI_SIMPLE_POINTER_PROTOCOL</code> 存在问题）。</p>
<h3 id="8-PointerSupportMode"><a href="#8-PointerSupportMode" class="headerlink" title="8. PointerSupportMode"></a>8. <code>PointerSupportMode</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: empty string<br><strong>Description</strong>: 设置用于内部指针驱动程序的 OEM 协议。</p>
<p>目前只支持 <code>ASUS</code> 值，使用的是 Z87 和 Z97 主板上的特殊协议。更多详情请参考 <a target="_blank" rel="noopener" href="https://github.com/LongSoft/UEFITool/pull/116"><code>LongSoft/UefiTool#116</code></a>。如果启用了 <code>PointerSupport</code>，此处值不能为空。</p>
<h3 id="9-TimerResolution"><a href="#9-TimerResolution" class="headerlink" title="9. TimerResolution"></a>9. <code>TimerResolution</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 固件始终刷新的频率（单位 100 纳秒）</p>
<p>设置较低的值可以提高界面和输入处理性能的响应能力。建议值为 <code>50000</code>（即 5 毫秒）或稍高一些。选择 ASUS Z87 主板时，请使用 <code>60000</code>，苹果主板请使用 <code>100000</code>。你也可以将此值保留为 <code>0</code>，由 OpenCore 自动计算。</p>
<h2 id="11-10-Output-属性"><a href="#11-10-Output-属性" class="headerlink" title="11.10 Output 属性"></a>11.10 Output 属性</h2><h3 id="1-TextRenderer"><a href="#1-TextRenderer" class="headerlink" title="1. TextRenderer"></a>1. <code>TextRenderer</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>BuiltinGraphics</code><br><strong>Description</strong>: 选择通过标准控制台输出的渲染器。</p>
<p>目前支持两种渲染器：<code>Builtin</code> 和 <code>System</code>。<code>System</code> 渲染器使用固件服务进行文本渲染。<code>Builtin</code> 渲染器则绕过固件服务，自行渲染文本。不同的渲染器支持的选项也不同。建议使用 <code>Builtin</code> 渲染器，因为它支持 HiDPI 模式，并能够使用全屏分辨率。</p>
<p>UEFI 固件一般用两种渲染模式来支持 <code>ConsoleControl</code>：<code>Graphics</code> 和 <code>Text</code>。有些固件不支持 <code>ConsoleControl</code> 和渲染模式。OpenCore 和 macOS 希望文本只在 <code>Graphics</code> 模式下显示，而图形可以在任何模式下绘制。由于 UEFI 规范并不要求这样做，因此具体的行为各不相同。</p>
<p>有效值为文本渲染器和渲染模式的组合：</p>
<ul>
<li><code>BuiltinGraphics</code> — 切换到 <code>Graphics</code> 模式，并使用 <code>Builtin</code> 渲染器和自定义 <code>ConsoleControl</code>。</li>
<li><code>BuiltinText</code> — 切换到 <code>Text</code> 模式，并使用 <code>Builtin</code> 渲染器和自定义 <code>ConsoleControl</code>。</li>
<li><code>SystemGraphics</code> — 切换到 <code>Graphics</code> 模式，并使用 <code>System</code> 渲染器和自定义 <code>ConsoleControl</code>。</li>
<li><code>SystemText</code> — 切换到 <code>Text</code> 模式，并使用 <code>System</code> 渲染器和自定义 <code>ConsoleControl</code>。</li>
<li><code>SystemGeneric</code> — 使用 <code>System</code> 渲染器和系统 <code>ConsoleControl</code>，前提是它们能正常工作。</li>
</ul>
<p><code>BuiltinGraphics</code> 的用法通常是比较直接的。对于大多数平台，需要启用 <code>ProvideConsoleGop</code>，将 <code>Resolution</code> 设置为 <code>Max</code>。某些非常老旧且问题很多的笔记本只能在 <code>Text</code> 模式下绘图，对它们来说，<code>BuiltinText</code> 是 <code>BuiltinGraphics</code> 的替代选择。</p>
<p><code>System</code> 协议的用法比较复杂。一般来说，首选设置 <code>SystemGraphics</code> 或 <code>SystemText</code>。启用 <code>ProvideConsoleGop</code>，将 <code>Resolution</code> 设置为 <code>Max</code>，启用 <code>ReplaceTabWithSpace</code> 几乎在所有平台上都很有用。<code>SanitiseClearScreen</code>、<code>IgnoreTextInGraphics</code> 和 <code>ClearScreenOnModeSwitch</code> 比较特殊，它们的用法取决于固件。</p>
<p><em>注</em>：某些 Mac，比如 <code>MacPro5,1</code>，在使用较新的 GPU 时，可能会出现控制台输出中断的情况，因此可能只有 <code>BuiltinGraphics</code> 对它们有效。</p>
<h3 id="2-ConsoleMode"><a href="#2-ConsoleMode" class="headerlink" title="2. ConsoleMode"></a>2. <code>ConsoleMode</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 按照 <code>WxH</code>（例如 <code>80x24</code>）格式的字符串所指定的方式设置控制台的输出模式。</p>
<p>设置为空字符串则不会改变控制台模式。设置为 <code>Max</code> 则会尝试最大的可用控制台模式。目前 <code>Builtin</code> 文本渲染器只支持一种控制台模式，所以该选项可以忽略。</p>
<p><em>注</em>：在大多数固件上，这个字段最好留空。</p>
<h3 id="3-Resolution"><a href="#3-Resolution" class="headerlink" title="3. Resolution"></a>3. <code>Resolution</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 设置控制台的屏幕分辨率。</p>
<ul>
<li>设置为 <code>WxH@Bpp</code>（如 <code>1920x1080@32</code>）或 <code>WxH</code>（如 <code>1920x1080</code>）格式的字符串，向 GOP 请求自定义分辨率。</li>
<li>设置为空字符串，不改变屏幕分辨率。</li>
<li>设置为 <code>Max</code>，尝试使用最大的可用屏幕分辨率。</li>
</ul>
<p>在 HiDPI 屏幕上，<code>APPLE_VENDOR_VARIABLE_GUID</code> <code>UIScale</code> NVRAM 变量可能需要设置为 <code>02</code>，以便在 <code>Builtin</code> 文本渲染器、FileVault 2 UEFI 密码界面和启动界面 logo 启用 HiDPI 缩放。更多细节请参考 <a href="9-nvram.html#9-4-建议变量">建议变量</a> 部分。</p>
<p><em>注</em>：当控制台句柄没有 GOP 协议时，这些设置会失败。当固件不再提供时，可以将 <code>ProvideConsoleGop</code> 设置为 <code>true</code> 并添加。</p>
<h3 id="4-ForceResolution"><a href="#4-ForceResolution" class="headerlink" title="4. ForceResolution"></a>4. <code>ForceResolution</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 当默认情况下无法获得所需分辨率时，强制设置 <code>Resolution</code> 中所填写的分辨率，多用于老的 Intel GMA 和第一代 Intel HD Graphics (Ironlake/Arrandale)。将  <code>Resolution</code> 设置为  <code>Max</code> 时，将尝试从所连接的显示器的 EDID 中提取最大的可用分辨率。</p>
<p><em>注</em>：该选项依赖 <a target="_blank" rel="noopener" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Protocol/OcForceResolution.h"><code>OC_FORCE_RESOLUTION_PROTOCOL</code></a> 协议。目前只有 <code>OpenDuetPkg</code> 支持该协议，而 <code>OpenDuetPkg</code> 的实现目前仅支持 Intel iGPU。</p>
<h3 id="4-ClearScreenOnModeSwitch"><a href="#4-ClearScreenOnModeSwitch" class="headerlink" title="4. ClearScreenOnModeSwitch"></a>4. <code>ClearScreenOnModeSwitch</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 有些固件在从图形模式切换到文本模式时，只会清除部分屏幕、而会留下一部分之前绘制的图像。启用这一选项后，在切换到文本模式之前会用黑色填充整个图形屏幕。</p>
<p><em>注</em>：这一选项只会在 <code>System</code> 渲染器上生效。</p>
<h3 id="5-DirectGopRendering"><a href="#5-DirectGopRendering" class="headerlink" title="5. DirectGopRendering"></a>5. <code>DirectGopRendering</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 为控制台使用内置的图形输出协议渲染器。</p>
<p>在某些固件上，这样做可能会提供更优的性能，甚至修复渲染问题，比如 <code>MacPro5,1</code>。但是，除非有明显的好处，否则还是建议不要使用这个选项，因为可能会导致滚动速度变慢。</p>
<h3 id="6-IgnoreTextInGraphics"><a href="#6-IgnoreTextInGraphics" class="headerlink" title="6. IgnoreTextInGraphics"></a>6. <code>IgnoreTextInGraphics</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 选择固件同时在图形和文本两种模式下在屏幕上输出文本。通常不会这样做，因为随机的文本可能会出现在图形图像上，并导致用户界面出错。将此选项设置为 <code>true</code> 时，会在控制台处于与 <code>Text</code> 不同的模式时，舍弃所有文本输出。</p>
<p><em>注</em>：这一选项只会在 <code>System</code> 渲染器上生效。</p>
<h3 id="7-ReplaceTabWithSpace"><a href="#7-ReplaceTabWithSpace" class="headerlink" title="7. ReplaceTabWithSpace"></a>7. <code>ReplaceTabWithSpace</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 有些固件不会打印 tab 符号，甚至不打印 tab 后面的所有内容，导致很难或根本无法用 UEFI Shell 内置的文本编辑器来编辑属性列表和其他文档。这个选项会使控制台输出空格来替代 tab。</p>
<p><em>注</em>：这一选项只会在 <code>System</code> 渲染器上生效。</p>
<h3 id="8-ProvideConsoleGop"><a href="#8-ProvideConsoleGop" class="headerlink" title="8. ProvideConsoleGop"></a>8. <code>ProvideConsoleGop</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 确保控制台句柄上有 GOP (Graphics Output Protocol)。</p>
<p>macOS bootloader 要求控制台句柄上必须有 GOP 或 UGA（适用于 10.4 EfiBoot），但 UEFI 规范并未涵盖图形协议的确切位置。此选项会确保 GOP 和 UGA（如果存在）在控制台句柄上可用。</p>
<p><em>注</em>：这个选项也会替换掉控制台句柄上损坏的 GOP 协议，在使用较新的 GPU 的 <code>MacPro5,1</code> 时可能会出现这种情况。</p>
<h3 id="9-ReconnectOnResChange"><a href="#9-ReconnectOnResChange" class="headerlink" title="9. ReconnectOnResChange"></a>9. <code>ReconnectOnResChange</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 改变屏幕分辨率后重新连接控制台控制器。</p>
<p>当通过 GOP 改变屏幕分辨率时，某些固件需要重新连接产生控制台协议（简单的文本输出）的控制器，否则它们不会根据新的分辨率生成文本。</p>
<p><em>注</em>：当 OpenCore 从 Shell 启动时，这个逻辑可能会导致某些主板黑屏，因此这个选项是非必须的。在 0.5.2 之前的版本中，这个选项是强制性的，不可配置。除非需要，否则请不要使用该选项。</p>
<h3 id="10-SanitiseClearScreen"><a href="#10-SanitiseClearScreen" class="headerlink" title="10. SanitiseClearScreen"></a>10. <code>SanitiseClearScreen</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 有些固件在使用较大的显示器（如 2K 或 4K）时，清除屏幕内容会导致屏幕分辨率重置为 failsafe 值（如 <code>1024x768</code>）。这个选项为这种情况提供了一个变通方法。</p>
<p><em>注</em>：这一选项只会在 <code>System</code> 渲染器上生效。在所有已知的受影响的系统中，<code>ConsoleMode</code> 必须设置为空字符串才能正常工作。</p>
<h3 id="11-UgaPassThrough"><a href="#11-UgaPassThrough" class="headerlink" title="11. UgaPassThrough"></a>11. <code>UgaPassThrough</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 在 GOP 协议的顶部提供 UGA 协议实例。</p>
<p>有些固件不会去实现老旧的 UGA 协议，但是有些更老的 EFI 应用程序（如 10.4 的 EfiBoot）可能需要用它来进行屏幕输出。</p>
<h2 id="11-11-ProtocolOverrides-属性"><a href="#11-11-ProtocolOverrides-属性" class="headerlink" title="11.11 ProtocolOverrides 属性"></a>11.11 ProtocolOverrides 属性</h2><h3 id="1-AppleAudio"><a href="#1-AppleAudio" class="headerlink" title="1. AppleAudio"></a>1. <code>AppleAudio</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置版本的 Apple 音频协议。</p>
<p>Apple 音频协议允许 macOS bootloader 和 OpenCore 播放声音和信号，用于屏幕阅读或可闻及的错误报告。支持的协议有生成「哔」声和 VoiceOver。VoiceOver 协议是带有 T2 芯片的机器特有的，不支持 macOS High Sierra (10.13) 之前的版本。旧版 macOS 版本使用的是 AppleHDA 协议，目前还没有实现。</p>
<p>每次只能有一组音频协议可用，所以如果为了在 Mac 系统上的 OpenCore 用户界面实现其中一些协议的音频播放，这一设置应该启用。</p>
<p><em>注</em>：后端音频驱动需要在 <code>UEFI Audio</code> 部分进行配置，以便这些协议能够流式传输音频。</p>
<h3 id="2-AppleBootPolicy"><a href="#2-AppleBootPolicy" class="headerlink" title="2. AppleBootPolicy"></a>2. <code>AppleBootPolicy</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple Boot Policy 协议，可用于确保 VM 或旧版 Mac 设备上的 APFS 兼容性。</p>
<p><em>注</em>：某些 Mac 设备（如 <code>MacPro5,1</code>）虽然兼容 APFS，但是其 Apple Boot Policy 协议包含了恢复分区检测问题，因此也建议启用这一选项。</p>
<h3 id="3-AppleDebugLog"><a href="#3-AppleDebugLog" class="headerlink" title="3. AppleDebugLog"></a>3. <code>AppleDebugLog</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple 调试日志输出协议。</p>
<h3 id="4-AppleEvent"><a href="#4-AppleEvent" class="headerlink" title="4. AppleEvent"></a>4. <code>AppleEvent</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple Event 协议，可以确保在 VM 或旧版 Mac 设备上的 FileVault 2 兼容性。</p>
<h3 id="5-AppleFramebufferInfo"><a href="#5-AppleFramebufferInfo" class="headerlink" title="5. AppleFramebufferInfo"></a>5. <code>AppleFramebufferInfo</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple Framebuffer Info 协议。这样可以覆盖虚拟机或者旧款 Mac 上的缓冲帧信息，从而提高与旧版 EfiBoot（如 macOS 10.4 中的 EfiBoot）的兼容性。</p>
<h3 id="6-AppleImageConversion"><a href="#6-AppleImageConversion" class="headerlink" title="6. AppleImageConversion"></a>6. <code>AppleImageConversion</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple Image Conservation 协议。</p>
<h3 id="7-AppleImg4Verification"><a href="#7-AppleImg4Verification" class="headerlink" title="7. AppleImg4Verification"></a>7. <code>AppleImg4Verification</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple IMG4 验证协议。该协议用于验证 Apple 安全启动所使用的 <code>im4m</code> 清单文件。</p>
<h3 id="8-AppleKeyMap"><a href="#8-AppleKeyMap" class="headerlink" title="8. AppleKeyMap"></a>8. <code>AppleKeyMap</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple Key Map 协议。</p>
<h3 id="9-AppleRtcRam"><a href="#9-AppleRtcRam" class="headerlink" title="9. AppleRtcRam"></a>9. <code>AppleRtcRam</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple RTC RAM 协议。</p>
<p><em>注</em>：内置的 Apple RTC RAM 协议可能会过滤掉 RTC 内存地址的潜在 I/O。地址列表可以在 <code>4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:rtc-blacklist</code> 中以数组的方式指定。</p>
<h3 id="10-AppleSecureBoot"><a href="#10-AppleSecureBoot" class="headerlink" title="10. AppleSecureBoot"></a>10. <code>AppleSecureBoot</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple 安全启动协议。</p>
<h3 id="11-AppleSmcIo"><a href="#11-AppleSmcIo" class="headerlink" title="11. AppleSmcIo"></a>11. <code>AppleSmcIo</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 SMC I/O 协议。</p>
<p>这一协议代替了传统的 <code>VirtualSmc.efi</code>，并与所有 SMC Kext 驱动兼容。如果你在用 FakeSMC，可能需要手动往 NVRAM 中添加键值对。</p>
<h3 id="12-AppleUserInterfaceTheme"><a href="#12-AppleUserInterfaceTheme" class="headerlink" title="12. AppleUserInterfaceTheme"></a>12. <code>AppleUserInterfaceTheme</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置的 Apple User Interface Theme 协议。</p>
<h3 id="13-DataHub"><a href="#13-DataHub" class="headerlink" title="13. DataHub"></a>13. <code>DataHub</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装具有内置版本的 Data Hub 协议。如果已经安装了协议，这将删除所有先前的属性。</p>
<h3 id="14-DeviceProperties"><a href="#14-DeviceProperties" class="headerlink" title="14. DeviceProperties"></a>14. <code>DeviceProperties</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 重新安装内置版本的 Device Property 协议。 如果已经安装，它将删除所有以前的属性。这一选项可用于确保在 VM 或旧版 Mac 设备上的兼容性。</p>
<h3 id="15-FirmwareVolume"><a href="#15-FirmwareVolume" class="headerlink" title="15. FirmwareVolume"></a>15. <code>FirmwareVolume</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 强制包装固件卷协议或安装新版本以支持 FileVault 2 的自定义光标图像。建议启用这一选项以确保 FileVault 2 在除 VM 和传统 Mac 设备之外的兼容性。</p>
<p><em>注</em>：包括 VMWare 在内的多个虚拟机在 HiDPI 模式下光标会损坏，因此建议为所有虚拟机启用这一选项。</p>
<h3 id="16-HashServices"><a href="#16-HashServices" class="headerlink" title="16. HashServices"></a>16. <code>HashServices</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 强制重新安装内置版本的 Hash Services 协议。为了在 SHA-1 哈希协议不完整的固件上确保 FileVault 2 的兼容性，这一 Quirk 应设置为 <code>true</code>。对于大多数固件来说，你可以通过将 <code>UIScale</code> 设置为 <code>02</code> 查看是否会出现禁行图标，来诊断你的固件是否需要这一 Quirk。一般来说，APTIO V（Haswell 和更早的平台）之前的平台都会受到影响。</p>
<h3 id="17-OSInfo"><a href="#17-OSInfo" class="headerlink" title="17. OSInfo"></a>17. <code>OSInfo</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 强制使用内置版本重新安装 OS Info 协议。该协议通常用于通过固件或其他应用程序从 macOS 引导加载程序接收通知。</p>
<h3 id="18-UnicodeCollation"><a href="#18-UnicodeCollation" class="headerlink" title="18. UnicodeCollation"></a>18. <code>UnicodeCollation</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 强制重新安装内置版本的 Unicode Collation 服务。建议启用这一选项以确保 UEFI Shell 的兼容性。一些较旧的固件破坏了 Unicode 排序规则，启用后可以修复这些系统上 UEFI Shell 的兼容性 (通常为用于 IvyBridge 或更旧的设备)</p>
<h2 id="11-12-Quirks-属性"><a href="#11-12-Quirks-属性" class="headerlink" title="11.12 Quirks 属性"></a>11.12 Quirks 属性</h2><h3 id="1-DisableSecurityPolicy"><a href="#1-DisableSecurityPolicy" class="headerlink" title="1. DisableSecurityPolicy"></a>1. <code>DisableSecurityPolicy</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 禁用平台安全策略。</p>
<p><em>注</em>：此设置可禁用固件的各种安全功能，因此也会同时破坏安全启动策略。如果打算使用 UEFI 安全启动，请勿启用此项。</p>
<h3 id="1-ExitBootServicesDelay"><a href="#1-ExitBootServicesDelay" class="headerlink" title="1. ExitBootServicesDelay"></a>1. <code>ExitBootServicesDelay</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 在 <code>EXIT_BOOT_SERVICES</code> 事件后添加延迟，单位为毫秒。</p>
<p>这是一个非常丑陋的 Quirk，用于修复 <code>Still waiting for root device</code> 提示信息。在使用 FileVault 2 时，特别是华硕 Z87-Pro 等 APTIO IV 固件这种错误经常发生。似乎因为某种原因，FileVault 与 <code>EXIT_BOOT_SERVICES</code> 同时执行、导致 macOS 无法访问 SATA 控制器。未来应该会找到一个更好的方法。如果需要启用这一选项，设置 3-5 秒的延时就可以了。</p>
<h3 id="2-IgnoreInvalidFlexRatio"><a href="#2-IgnoreInvalidFlexRatio" class="headerlink" title="2. IgnoreInvalidFlexRatio"></a>2. <code>IgnoreInvalidFlexRatio</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 某些固件，即 APTIO IV，可能在 <code>MSR_FLEX_RATIO</code> (<code>0x194</code>) MSR 寄存器中含有无效值。这些值可能会导致 macOS 在 Intel 平台上启动失败。</p>
<p><em>注</em>：虽然该选项不会对不受影响的固件造成损害，但在不需要的情况下不建议启用。</p>
<h3 id="3-ReleaseUsbOwnership"><a href="#3-ReleaseUsbOwnership" class="headerlink" title="3. ReleaseUsbOwnership"></a>3. <code>ReleaseUsbOwnership</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 尝试从固件驱动程序中分离 USB 控制器所有权。尽管大多数固件都设法正确执行了该操作或者提供有一个选项，但某些固件没有，从而导致操作系统可能会在启动时冻结。除非需要，否则不建议启用这一选项。</p>
<h3 id="4-RequestBootVarRouting"><a href="#4-RequestBootVarRouting" class="headerlink" title="4. RequestBootVarRouting"></a>4. <code>RequestBootVarRouting</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 请求将所有带有 <code>Boot</code> 前缀的变量从 <code>EFI_GLOBAL_VARIABLE_GUID</code> 重定向到 <code>OC_VENDOR_VARIABLE_GUID</code>。</p>
<p>启用这个 Quirk 需要用到在 <code>OpenRuntime.efi</code> 中实现的 <code>OC_FIRMWARE_RUNTIME</code> 协议。当固件删除不兼容的启动条目时，这一 Quirk 可以让默认的启动条目保存在引导菜单中。简单地说就是，如果你想使用「系统偏好设置」中的「<a target="_blank" rel="noopener" href="https://support.apple.com/HT202796">启动磁盘</a>」，就必须启用这一 Quirk。</p>
<p>借助 <code>RequestBootVarRouting</code> 将 <code>Boot</code> 前缀变量重定向至单独的 GUID 命名空间，可实现以下效果：</p>
<ul>
<li>囚禁操作系统，使其只受 OpenCore 引导环境的控制，从而提高了安全性。</li>
<li>如遇到中途需要通过 OpenCore 来重启的情况，操作系统不会搞乱 OpenCore 的引导优先级，保证了系统更新和休眠唤醒的流畅性。</li>
<li>macOS 等潜在的不兼容的启动项，现在不会被意外删除或损坏了。</li>
</ul>
<h3 id="5-TscSyncTimeout"><a href="#5-TscSyncTimeout" class="headerlink" title="5. TscSyncTimeout"></a>5. <code>TscSyncTimeout</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 尝试用指定的 Timeout 执行 TSC 同步。</p>
<p>这个 Quirk 的主要目的是在运行 XNU 调试内核时，在一些服务器和笔记本型号上实现早期引导 TSC 同步。对于调试内核，在任何 Kext 可能导致其他解决方案出现问题之前，TSC 需要在各个内核之间保持同步。Timeout 以微秒为单位，取决于平台上存在的核心数量，推荐的起始值是 <code>500000</code>。</p>
<p>这是一个实验性的 Quirk，只能被用于上述问题。在其他情况下，这个 Quirk 可能会导致操作系统不稳定，所以并不推荐使用。在其他情况下，推荐的解决办法是安装一个内核驱动，如 <a target="_blank" rel="noopener" href="https://github.com/RehabMan/VoodooTSCSync">VoodooTSCSync</a>、<a target="_blank" rel="noopener" href="https://github.com/interferenc/TSCAdjustReset">TSCAdjustReset</a> 或 <a target="_blank" rel="noopener" href="https://github.com/lvs1974/CpuTscSync">CpuTscSync</a>（是 VoodooTSCSync 的一个更有针对性的变种，适用于较新的笔记本电脑）。</p>
<p><em>注</em>：这个 Quirk 不能取代内核驱动的原因是它不能在 ACPI S3 模式（睡眠唤醒）下运行，而且 UEFI 固件提供的多核心支持非常有限，无法精确地更新 MSR 寄存器。</p>
<h3 id="6-UnblockFsConnect"><a href="#6-UnblockFsConnect" class="headerlink" title="6. UnblockFsConnect"></a>6. <code>UnblockFsConnect</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 某些固件通过「按驱动程序」模式下来阻止引导项加载，导致文件系统协议无法安装。</p>
<p><em>注</em>：如果惠普笔记本在 OpenCore 界面没有看到引导项，启用这一选项。</p>
<h2 id="11-13-ReservedMemory-属性"><a href="#11-13-ReservedMemory-属性" class="headerlink" title="11.13 ReservedMemory 属性"></a>11.13 ReservedMemory 属性</h2><h3 id="1-Address"><a href="#1-Address" class="headerlink" title="1. Address"></a>1. <code>Address</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 保留内存区域的起始地址，该区域应被分配为保留区，有效地将此类型的内存标记标记为操作系统不可访问。</p>
<p>这里写的地址必须是内存映射的一部分，具有 <code>EfiConventionalMemory</code> 类型，并且按页对齐（4KB）。</p>
<p><em>注</em>：禁用 CSM 后，某些固件可能不会为 S3（睡眠）和 S4（休眠）分配内存区域，因此导致唤醒失败。你可以分别比较禁用和启用 CSM 的内存映射，从低层内存中找到这些区域，并保留该区域来修复这个问题。详见 <code>Sample.plist</code>。</p>
<h3 id="2-Comment"><a href="#2-Comment" class="headerlink" title="2. Comment"></a>2. <code>Comment</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 用于为条目提供人类可读参考的任意 ASCII 字符串（译者注：即注释）。该值取决于具体的实现定义。</p>
<h3 id="3-Size"><a href="#3-Size" class="headerlink" title="3. Size"></a>3. <code>Size</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 保留的内存区域的大小，必须按页对齐（4KB）。</p>
<h3 id="4-Type"><a href="#4-Type" class="headerlink" title="4. Type"></a>4. <code>Type</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>Reserved</code><br><strong>Description</strong>: 内存区域类型，与 UEFI 规范的内存描述符类型的匹配映射如下：</p>
<ul>
<li><code>Reserved</code> — <code>EfiReservedMemoryType</code></li>
<li><code>LoaderCode</code> — <code>EfiLoaderCode</code></li>
<li><code>LoaderData</code> — <code>EfiLoaderData</code></li>
<li><code>BootServiceCode</code> — <code>EfiBootServicesCode</code></li>
<li><code>BootServiceData</code> — <code>EfiBootServicesData</code></li>
<li><code>RuntimeCode</code> — <code>EfiRuntimeServicesCode</code></li>
<li><code>RuntimeData</code> — <code>EfiRuntimeServicesData</code></li>
<li><code>Available</code> — <code>EfiConventionalMemory</code></li>
<li><code>Persistent</code> — <code>EfiPersistentMemory</code></li>
<li><code>UnusableMemory</code> — <code>EfiUnusableMemory</code></li>
<li><code>ACPIReclaimMemory</code> — <code>EfiACPIReclaimMemory</code></li>
<li><code>ACPIMemoryNVS</code> — <code>EfiACPIMemoryNVS</code></li>
<li><code>MemoryMappedIO</code> — <code>EfiMemoryMappedIO</code></li>
<li><code>MemoryMappedIOPortSpace</code> — <code>EfiMemoryMappedIOPortSpace</code></li>
<li><code>PalCode</code> — <code>EfiPalCode</code></li>
</ul>
<h3 id="5-Enabled"><a href="#5-Enabled" class="headerlink" title="5. Enabled"></a>5. <code>Enabled</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 除非设置为 <code>true</code>，否则该区域不会被保留。</p>

            </div>

            <ul class="doku-pagination">
            <li class="page-item page-prev">
                <a href="/10-platform-info.html">
                    <div class="page-item-subtitle"><span class="icon is-small"><i class="fas fa-arrow-left"></i></span> <span>前一页</span></div>
                    <div class="page-item-title h5">10. PlatformInfo</div>
                </a>
            </li>
            <li class="page-item page-next">
                <a href="/12-troubleshooting.html">
                    <div class="page-item-subtitle"><span>后一页</span> <span class="icon is-small"><i class="fas fa-arrow-right"></i></span></div>
                    <div class="page-item-title h5">12. 排错</div>
                </a>
            </li></ul>
        </div>
        
        <div class="column is-3 is-narrow-touch is-hidden-mobile">
            <aside class="doku-document-toc" id="doku-document-toc">
                <div class="doku-document-toc-content">
                    <p class="doku-document-toc-title">目录</p>
                    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-1-%E7%AE%80%E4%BB%8B"><span class="post-toc-text">11.1 简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-2-%E9%A9%B1%E5%8A%A8%E5%88%97%E8%A1%A8"><span class="post-toc-text">11.2 驱动列表</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-3-%E5%B7%A5%E5%85%B7%E4%B8%8E%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="post-toc-text">11.3 工具与应用程序</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-4-OpenCanopy"><span class="post-toc-text">11.4 OpenCanopy</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-5-OpenRuntime"><span class="post-toc-text">11.5 OpenRuntime</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-6-%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8"><span class="post-toc-text">11.6 属性列表</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-APFS"><span class="post-toc-text">1. APFS</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Audio"><span class="post-toc-text">2. Audio</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-ConnectDrivers"><span class="post-toc-text">3. ConnectDrivers</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-Drivers"><span class="post-toc-text">4. Drivers</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-Input"><span class="post-toc-text">5. Input</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-Output"><span class="post-toc-text">6. Output</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-ProtocolOverrides"><span class="post-toc-text">7. ProtocolOverrides</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-Quirks"><span class="post-toc-text">8. Quirks</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-ReservedMemory"><span class="post-toc-text">9. ReservedMemory</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-7-APFS-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.7 APFS 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-EnableJumpstart"><span class="post-toc-text">1. EnableJumpstart</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-GlobalConnect"><span class="post-toc-text">2. GlobalConnect</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-HideVerbose"><span class="post-toc-text">3. HideVerbose</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-JumpstartHotPlug"><span class="post-toc-text">4. JumpstartHotPlug</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-MinDate"><span class="post-toc-text">5. MinDate</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-MinVersion"><span class="post-toc-text">6. MinVersion</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-8-Audio-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.8 Audio 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-AudioCodec"><span class="post-toc-text">1. AudioCodec</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-AudioDevice"><span class="post-toc-text">2. AudioDevice</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-AudioOut"><span class="post-toc-text">3. AudioOut</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-AudioSupport"><span class="post-toc-text">4. AudioSupport</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-MinimumVolume"><span class="post-toc-text">5. MinimumVolume</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-PlayChime"><span class="post-toc-text">6. PlayChime</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-SetupDelay"><span class="post-toc-text">7. SetupDelay</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-VolumeAmplifier"><span class="post-toc-text">8. VolumeAmplifier</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-9-Input-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.9 Input 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-KeyFiltering"><span class="post-toc-text">1. KeyFiltering</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-KeyForgetThreshold"><span class="post-toc-text">2. KeyForgetThreshold</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-KeyMergeThreshold"><span class="post-toc-text">3. KeyMergeThreshold</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-KeySupport"><span class="post-toc-text">4. KeySupport</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-KeySupportMode"><span class="post-toc-text">5. KeySupportMode</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-KeySwap"><span class="post-toc-text">6. KeySwap</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-PointerSupport"><span class="post-toc-text">7. PointerSupport</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-PointerSupportMode"><span class="post-toc-text">8. PointerSupportMode</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-TimerResolution"><span class="post-toc-text">9. TimerResolution</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-10-Output-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.10 Output 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-TextRenderer"><span class="post-toc-text">1. TextRenderer</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-ConsoleMode"><span class="post-toc-text">2. ConsoleMode</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Resolution"><span class="post-toc-text">3. Resolution</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-ForceResolution"><span class="post-toc-text">4. ForceResolution</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-ClearScreenOnModeSwitch"><span class="post-toc-text">4. ClearScreenOnModeSwitch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-DirectGopRendering"><span class="post-toc-text">5. DirectGopRendering</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-IgnoreTextInGraphics"><span class="post-toc-text">6. IgnoreTextInGraphics</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-ReplaceTabWithSpace"><span class="post-toc-text">7. ReplaceTabWithSpace</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-ProvideConsoleGop"><span class="post-toc-text">8. ProvideConsoleGop</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-ReconnectOnResChange"><span class="post-toc-text">9. ReconnectOnResChange</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-SanitiseClearScreen"><span class="post-toc-text">10. SanitiseClearScreen</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-UgaPassThrough"><span class="post-toc-text">11. UgaPassThrough</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-11-ProtocolOverrides-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.11 ProtocolOverrides 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-AppleAudio"><span class="post-toc-text">1. AppleAudio</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-AppleBootPolicy"><span class="post-toc-text">2. AppleBootPolicy</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-AppleDebugLog"><span class="post-toc-text">3. AppleDebugLog</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-AppleEvent"><span class="post-toc-text">4. AppleEvent</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-AppleFramebufferInfo"><span class="post-toc-text">5. AppleFramebufferInfo</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-AppleImageConversion"><span class="post-toc-text">6. AppleImageConversion</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-AppleImg4Verification"><span class="post-toc-text">7. AppleImg4Verification</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-AppleKeyMap"><span class="post-toc-text">8. AppleKeyMap</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-AppleRtcRam"><span class="post-toc-text">9. AppleRtcRam</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-AppleSecureBoot"><span class="post-toc-text">10. AppleSecureBoot</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-AppleSmcIo"><span class="post-toc-text">11. AppleSmcIo</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-AppleUserInterfaceTheme"><span class="post-toc-text">12. AppleUserInterfaceTheme</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#13-DataHub"><span class="post-toc-text">13. DataHub</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#14-DeviceProperties"><span class="post-toc-text">14. DeviceProperties</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#15-FirmwareVolume"><span class="post-toc-text">15. FirmwareVolume</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#16-HashServices"><span class="post-toc-text">16. HashServices</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#17-OSInfo"><span class="post-toc-text">17. OSInfo</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#18-UnicodeCollation"><span class="post-toc-text">18. UnicodeCollation</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-12-Quirks-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.12 Quirks 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-DisableSecurityPolicy"><span class="post-toc-text">1. DisableSecurityPolicy</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ExitBootServicesDelay"><span class="post-toc-text">1. ExitBootServicesDelay</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-IgnoreInvalidFlexRatio"><span class="post-toc-text">2. IgnoreInvalidFlexRatio</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-ReleaseUsbOwnership"><span class="post-toc-text">3. ReleaseUsbOwnership</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-RequestBootVarRouting"><span class="post-toc-text">4. RequestBootVarRouting</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-TscSyncTimeout"><span class="post-toc-text">5. TscSyncTimeout</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-UnblockFsConnect"><span class="post-toc-text">6. UnblockFsConnect</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-13-ReservedMemory-%E5%B1%9E%E6%80%A7"><span class="post-toc-text">11.13 ReservedMemory 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Address"><span class="post-toc-text">1. Address</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Comment"><span class="post-toc-text">2. Comment</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Size"><span class="post-toc-text">3. Size</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-Type"><span class="post-toc-text">4. Type</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-Enabled"><span class="post-toc-text">5. Enabled</span></a></li></ol></li></ol>
                </div>
            </aside>
        </div>
        
    </div>
</article>

                <footer>
    <div class="doku-footer-container is-clearfix">
        <div class="doku-footer-item is-pulled-left">&copy; <span id="doku-copyrght-year"></span> <a href="/">OpenCore 简体中文参考手册(非官方)</a></div>

        <div class="doku-footer-item is-pulled-right">Powered by <a href="https://hexo.io" target="_blank" rel="external noopenner nofollow">Hexo</a> & <a href="https://github.com/SukkaW/hexo-theme-doku" target="_blank" rel="external noopenner nofollow">Doku</a></div>
    </div>
</footer>

            </main>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/stickyfilljs@2.1.0/dist/stickyfill.min.js"></script>
    <script src="/theme-doku/js/doku.js"></script>
</body>

</html>
